ğŸ” PHASE-1: Requirement Clarification
ğŸ”„ Functional Requirements (Core)
â¤ User can browse content 
â¤ User can search movies/series
â¤ User can stream videos
â¤ Resume playback
â¤ Personalized recommendations
â¤ Multi-device support


ğŸ”„ Out of Scope (Explicitly Mention)
â¤ Content creation
â¤ Live streaming
â¤ Ads platform
â¤ Payments (assume handled separately)


ğŸ”„ Non-Functional Requirements 
| Requirement   | Expectation     |
| ------------- | --------------- |
| Scale         | 200M+ users     |
| Latency       | Startup < 2 sec |
| Availability  | Very high       |
| Video Quality | Adaptive        |
| Consistency   | Eventual OK     |
| Global Reach  | Yes             |
ğŸ‘‰ â€œLow startup latency and uninterrupted playback are top priorities.â€


ğŸ” PHASE-2: High-Level Architecture
Client (TV / Mobile / Web)
        â†“
API Gateway
        â†“
Microservices
   â”œâ”€â”€ User Service
   â”œâ”€â”€ Catalog Service
   â”œâ”€â”€ Search Service
   â”œâ”€â”€ Recommendation Service
        â†“
Metadata DB + Cache
        â†“
CDN (Video Delivery)


ğŸ”„ Core Idea
â¤ Metadata & control plane â†’ Netflix servers
â¤ Video delivery â†’ CDN (Open Connect)
ğŸ‘‰ â€œNetflix separates control plane from data plane.â€


ğŸ” PHASE-3: Core Services Breakdown
| Service          | Responsibility  |
| ---------------- | --------------- |
| Auth Service     | Login & tokens  |
| Catalog Service  | Movies, genres  |
| Search Service   | Text search     |
| Playback Service | Streaming logic |
| Recommendation   | Personalization |
| Viewing History  | Resume playback |


ğŸ” PHASE-4: Video Upload & Processing (BACKEND SIDE)
Even though Netflix ingests content, interviewers expect this.

ğŸ”¥ Video Processing Pipeline
Upload
 â†’ Object Storage
 â†’ Kafka
 â†’ Transcoding Workers
 â†’ Store multiple resolutions
 â†’ CDN distribution


ğŸ”„ Why Transcoding?
â¤ Different devices
â¤ Different network speeds
Formats: 240p, 480p, 720p, 1080p, 4K

ğŸ”„ Tech
| Component  | Tech         |
| ---------- | ------------ |
| Storage    | S3           |
| Processing | FFmpeg       |
| Queue      | Kafka        |
| CDN        | Open Connect |


ğŸ” PHASE-5: Video Streaming (CORE INTERVIEW PART)
ğŸ”¥ Streaming Flow
Client
 â†’ Request metadata
 â†’ Get manifest (MPD)
 â†’ Fetch video chunks from CDN


ğŸ”„ Key Concepts
â¤ Chunked video
â¤ Adaptive Bitrate Streaming
â¤ Manifest files

Protocols:
    âœ”ï¸ DASH
    âœ”ï¸ HLS
ğŸ‘‰ â€œClient dynamically switches resolution based on bandwidth.â€


ğŸ” PHASE-6: CDN
ğŸ”„ Netflix Open Connect
â¤ ISP-level caching
â¤ Edge servers close to users
â¤ Reduces backbone traffic
ğŸ‘‰ â€œNetflix runs its own CDN instead of relying solely on third-party CDNs.â€


ğŸ”„ Cache Strategy
| Data            | Location   |
| --------------- | ---------- |
| Video chunks    | Edge CDN   |
| Metadata        | Redis      |
| Popular content | Pre-warmed |


ğŸ” PHASE-7: Resume Playback
ğŸ”„ Flow
1ï¸âƒ£ Client sends progress
2ï¸âƒ£ Stored in viewing history
3ï¸âƒ£ Resumed on next device

â¤ Schema:
user_id
content_id
timestamp
progress_seconds


ğŸ” PHASE-8: Recommendation System (HIGH-LEVEL)
ğŸ”„ Signals
â¤ Watch time
â¤ Likes
â¤ Search history
â¤ Device
â¤ Time of day
ğŸ‘‰ â€œRecommendations are generated offline and refined online.â€


ğŸ”„ Architecture
User Events
 â†’ Kafka
 â†’ Feature Store
 â†’ ML Models
 â†’ Precomputed Rows
 â†’ Redis Cache


ğŸ” PHASE-9: Search System
â¤ Elasticsearch
â¤ Autocomplete
â¤ Fuzzy matching
â¤ Language aware


ğŸ” PHASE-10: Database Design
| Data            | Tech      |
| --------------- | --------- |
| User data       | MySQL     |
| Metadata        | Cassandra |
| Viewing history | Cassandra |
| Cache           | Redis     |


ğŸ” PHASE-11: Scalability & Reliability
ğŸ”„ Scalability
â¤ Stateless services
â¤ Auto-scaling
â¤ Geo-replication


ğŸ”„ Reliability
â¤ Circuit breakers
â¤ Fallback CDN
â¤ Graceful quality downgrade
ğŸ‘‰ â€œWe prefer reduced quality over playback failure.â€


ğŸ” PHASE-12: Security
â¤ DRM (Widevine, PlayReady)
â¤ HTTPS
â¤ Tokenized URLs
â¤ Geo-blocking


ğŸ¯ COMMON TRAPS
âŒ Ignoring CDN
âŒ Sending video via backend servers
âŒ Forgetting adaptive bitrate
âŒ Treating recommendation as real-time only
