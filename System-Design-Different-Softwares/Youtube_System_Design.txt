ğŸ” PHASE-1: Requirement Clarification

ğŸ”„ Functional Requirements
â¤ User uploads videos
â¤ Users watch videos
â¤ Search videos
â¤ Like / comment
â¤ Subscribe to channels
â¤ Recommendation feed
â¤ View count


ğŸ”„ Out of Scope
â¤ Live streaming
â¤ Ads system
â¤ Copyright claims
â¤ Creator monetization


ğŸ”„ Non-Functional Requirements
| Requirement        | Expectation       |
| ------------------ | ----------------- |
| Scale              | Billions of users |
| Upload reliability | Very high         |
| Watch latency      | < 2 sec           |
| Availability       | 99.99%            |
| Consistency        | Eventual OK       |
| Storage            | Massive           |
ğŸ‘‰ â€œUploads must never be lost, but recommendations can be eventually consistent.â€


ğŸ” PHASE-2: High-Level Architecture
Client (Web / Mobile / TV)
        â†“
API Gateway
        â†“
Microservices
   â”œâ”€â”€ User Service
   â”œâ”€â”€ Video Service
   â”œâ”€â”€ Search Service
   â”œâ”€â”€ Recommendation Service
        â†“
Databases + Cache
        â†“
CDN (Video Delivery)


ğŸ”„ Key Principle
â¤ Control Plane â†’ YouTube servers
â¤ Data Plane â†’ CDN
ğŸ‘‰ â€œBackend never streams videos directly.â€


ğŸ” PHASE-3: Core Services
| Service              | Responsibility  |
| -------------------- | --------------- |
| Auth Service         | User identity   |
| Video Upload Service | Upload handling |
| Video Processing     | Transcoding     |
| Video Metadata       | Title, tags     |
| Feed Service         | Home feed       |
| Recommendation       | Ranking         |
| Comment Service      | Comments        |
| Subscription Service | Channel subs    |


ğŸ” PHASE-4: Video Upload
ğŸ”¥ Upload Flow
Client
 â†’ Request upload URL
 â†’ Upload to Object Storage
 â†’ Metadata saved
 â†’ Event to Kafka
 â†’ Processing pipeline

ğŸ”„ Why Pre-Signed URL?
â¤ Avoid backend overload
â¤ Support large files
â¤ Resume uploads

ğŸ‘‰ â€œUpload traffic bypasses application servers.â€


ğŸ” PHASE-5: Video Processing Pipeline
Raw Video
 â†’ Transcoding Workers
 â†’ Multiple Resolutions
 â†’ Thumbnails
 â†’ Store in Object Storage
 â†’ Push to CDN

ğŸ”„ Technologies
| Component   | Tech         |
| ----------- | ------------ |
| Queue       | Kafka        |
| Transcoding | FFmpeg       |
| Storage     | S3           |
| Workers     | Auto-scaling |


ğŸ” PHASE-6: Video Streaming
ğŸ”¥ Streaming Flow
Client
 â†’ Fetch metadata
 â†’ Get manifest file
 â†’ Stream chunks from CDN

ğŸ”„ Concepts You MUST Say
â¤ Chunk-based streaming
â¤ Adaptive Bitrate Streaming
â¤ Manifest files (HLS / DASH)
ğŸ‘‰ â€œClient dynamically switches quality based on bandwidth.â€


ğŸ” PHASE-7: CDN (CRITICAL)
ğŸ”„ Why CDN?
â¤ Global users
â¤ Huge bandwidth
â¤ Low latency

ğŸ‘‰ YouTube:
    âœ”ï¸ Uses Google CDN
    âœ”ï¸ Edge caching
    âœ”ï¸ Regional replication


ğŸ” PHASE-8: Recommendation System (HIGH-LEVEL)
ğŸ”„ Signals
â¤ Watch time
â¤ Likes
â¤ Comments
â¤ Subscriptions
â¤ Watch history

ğŸ‘‰ â€œRecommendations are primarily driven by watch time.â€


ğŸ”„ Architecture
User Events
 â†’ Kafka
 â†’ Feature Store
 â†’ ML Models
 â†’ Ranked Feeds
 â†’ Redis Cache


ğŸ” PHASE-9: Search System
â¤ Elasticsearch
â¤ Inverted index
â¤ Autocomplete
â¤ Language aware


ğŸ” PHASE-10: Likes, Comments & Views
ğŸ”„ View Count
â¤ Event-based
â¤ Batched aggregation
â¤ Avoid double counting

ğŸ‘‰ â€œView counts are approximate in real time.â€


ğŸ” PHASE-11: Database Design
| Data           | Tech      |
| -------------- | --------- |
| User data      | MySQL     |
| Video metadata | Cassandra |
| Watch history  | Cassandra |
| Comments       | Cassandra |
| Cache          | Redis     |


ğŸ” PHASE-12: Scalability
â¤ Stateless services
â¤ Auto-scaling
â¤ Sharding by video_id
â¤ CDN offload


ğŸ” PHASE-13: Reliability & Fault Tolerance
â¤ Upload retries
â¤ DLQ for failed processing
â¤ Graceful quality downgrade
â¤ Multi-CDN fallback


ğŸ” PHASE-14: Security
â¤ HTTPS
â¤ Signed URLs
â¤ DRM
â¤ Content access control


ğŸ¯ COMMON TRAPS
âŒ Streaming videos from backend servers
âŒ Forgetting transcoding
âŒ Treating view count as strongly consistent
âŒ Ignoring CDN
